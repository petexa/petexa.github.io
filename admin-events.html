<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Admin - Bootcamp Elite Fitness</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <style>
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
      }

      .admin-container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 2rem;
        background: #2d2d2d;
        border-radius: 12px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }

      .admin-header {
        text-align: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #444;
      }

      .admin-header h1 {
        color: #80affe;
        margin-bottom: 0.5rem;
      }

      .admin-header p {
        color: #aaa;
        font-size: 0.9rem;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-group label {
        display: block;
        color: #fff;
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #444;
        border-radius: 8px;
        background: #1e1e1e;
        color: #fff;
        font-size: 1rem;
        font-family: 'Bai Jamjuree', sans-serif;
        transition: border-color 0.3s ease;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #80affe;
      }

      .form-group textarea {
        resize: vertical;
        min-height: 100px;
      }

      .form-group small {
        display: block;
        color: #aaa;
        font-size: 0.85rem;
        margin-top: 0.25rem;
      }

      .required {
        color: #29ffb4;
      }

      .button-group {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
      }

      .btn {
        flex: 1;
        padding: 14px 24px;
        border: none;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: 'Bai Jamjuree', sans-serif;
      }

      .btn-primary {
        background: linear-gradient(135deg, #80affe 0%, #29ffb4 100%);
        color: #fff;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(128, 175, 254, 0.4);
      }

      .btn-secondary {
        background: #444;
        color: #fff;
      }

      .btn-secondary:hover {
        background: #555;
      }

      .output-section {
        margin-top: 2rem;
        padding: 1.5rem;
        background: #1e1e1e;
        border-radius: 8px;
        border: 2px solid #444;
      }

      .output-section h3 {
        color: #29ffb4;
        margin-bottom: 1rem;
        font-size: 1.1rem;
      }

      .code-block {
        background: #0d0d0d;
        padding: 1rem;
        border-radius: 6px;
        overflow-x: auto;
        margin-bottom: 1rem;
      }

      .code-block pre {
        margin: 0;
        color: #29ffb4;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .copy-btn {
        background: #80affe;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .copy-btn:hover {
        background: #6a9ae8;
      }

      .instructions {
        background: #2a2a2a;
        padding: 1rem;
        border-radius: 6px;
        border-left: 4px solid #80affe;
        margin-top: 1rem;
      }

      .instructions h4 {
        color: #80affe;
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
      }

      .instructions ol {
        margin: 0.5rem 0 0 1.5rem;
        padding: 0;
      }

      .instructions li {
        color: #ccc;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
      }

      .success-message {
        background: #1a4d2e;
        color: #29ffb4;
        padding: 1rem;
        border-radius: 6px;
        margin-top: 1rem;
        border: 1px solid #29ffb4;
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Password Protection -->
    <div id="passwordScreen" style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);">
      <div style="max-width: 400px; width: 100%; padding: 2rem; background: #2d2d2d; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
        <div style="text-align: center; margin-bottom: 2rem;">
          <i class="fa-solid fa-lock" style="font-size: 3rem; color: #80affe; margin-bottom: 1rem;"></i>
          <h2 style="color: #fff; margin: 0 0 0.5rem 0;">Admin Access</h2>
          <p style="color: #aaa; font-size: 0.9rem; margin: 0;">Enter password to continue</p>
        </div>
        <form id="passwordForm" style="display: flex; flex-direction: column; gap: 1rem;">
          <input
            type="password"
            id="passwordInput"
            placeholder="Password"
            style="width: 100%; padding: 14px 16px; border: 2px solid #444; border-radius: 8px; background: #1e1e1e; color: #fff; font-size: 1rem; font-family: 'Bai Jamjuree', sans-serif;"
            autofocus
          />
          <button type="submit" style="width: 100%; padding: 14px 24px; background: linear-gradient(135deg, #80affe 0%, #29ffb4 100%); color: #fff; border: none; border-radius: 50px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-family: 'Bai Jamjuree', sans-serif;">
            Unlock
          </button>
          <p id="passwordError" style="color: #ff6b6b; font-size: 0.9rem; margin: 0; text-align: center; display: none;">Incorrect password</p>
        </form>
      </div>
    </div>

    <div id="adminContent" style="display: none;">
    <div class="admin-container">
      <div class="admin-header">
        <h1>üîí Event Creator</h1>
        <p>Admin tool for creating new events</p>
      </div>

      <form id="eventForm">
        <div class="form-group">
          <label for="eventName">Event Name <span class="required">*</span></label>
          <input
            type="text"
            id="eventName"
            name="eventName"
            required
            placeholder="e.g., Nuclear Fit Challenge"
          />
        </div>

        <div class="form-group">
          <label for="eventDate">Event Date <span class="required">*</span></label>
          <input type="date" id="eventDate" name="eventDate" required />
          <small>This will be used in the filename (YYYYMMDD format)</small>
        </div>

        <div class="form-group">
          <label for="eventTime">Event Time</label>
          <input
            type="time"
            id="eventTime"
            name="eventTime"
            placeholder="e.g., 18:00"
          />
          <small>Optional - 24-hour format (HH:MM)</small>
        </div>

        <div class="form-group">
          <label for="eventLink">Event Link (URL)</label>
          <input
            type="url"
            id="eventLink"
            name="eventLink"
            placeholder="https://example.com/event"
          />
          <small>Link to event registration or information page</small>
        </div>

        <div class="form-group">
          <label for="eventImage">Image Path</label>
          <input
            type="text"
            id="eventImage"
            name="eventImage"
            placeholder="images/event.jpg"
          />
          <small>Path to event image in images/ folder</small>
        </div>

        <div class="form-group">
          <label for="eventDescription">Description</label>
          <textarea
            id="eventDescription"
            name="eventDescription"
            placeholder="Describe the event details, what participants should know, etc."
          ></textarea>
        </div>

        <div class="form-group">
          <label for="eventLocation">Calendar Location</label>
          <input
            type="text"
            id="eventLocation"
            name="eventLocation"
            placeholder="e.g., Bootcamp Elite Fitness Gym"
          />
          <small>Location shown in calendar invitation</small>
        </div>

        <div class="form-group">
          <label for="calendarDescription">Calendar Description</label>
          <textarea
            id="calendarDescription"
            name="calendarDescription"
            placeholder="Description for calendar invitation (optional, uses main description if empty)"
          ></textarea>
          <small>Custom description for calendar invite</small>
        </div>

        <div class="form-group">
          <label for="durationHours">Event Duration (hours)</label>
          <input
            type="number"
            id="durationHours"
            name="durationHours"
            min="1"
            max="24"
            value="4"
            placeholder="4"
          />
          <small>Duration for calendar invitation</small>
        </div>

        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
            <input
              type="checkbox"
              id="showMoreInfo"
              name="showMoreInfo"
              checked
              style="width: auto; cursor: pointer;"
            />
            <span>Show "More Info" button</span>
          </label>
        </div>

        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
            <input
              type="checkbox"
              id="showBookNow"
              name="showBookNow"
              checked
              style="width: auto; cursor: pointer;"
            />
            <span>Show "Book Now" button</span>
          </label>
        </div>

        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
            <input
              type="checkbox"
              id="showRemindMe"
              name="showRemindMe"
              checked
              style="width: auto; cursor: pointer;"
            />
            <span>Show "Remind Me" button</span>
          </label>
        </div>

        <div class="button-group">
          <button type="submit" class="btn btn-primary">Generate Event JSON</button>
          <button type="reset" class="btn btn-secondary">Clear Form</button>
        </div>
      </form>

      <div id="outputSection" class="output-section" style="display: none;">
        <h3>üìÑ Generated Files</h3>
        
        <h4 style="color: #fff; margin-top: 1.5rem;">1. Event JSON File</h4>
        <p style="color: #aaa; font-size: 0.9rem;">Filename: <code id="filename" style="color: #29ffb4;"></code></p>
        <div class="code-block">
          <pre id="jsonOutput"></pre>
        </div>
        <button class="copy-btn" onclick="copyJSON()">üìã Copy JSON</button>

        <h4 style="color: #fff; margin-top: 1.5rem;">2. Update events-list.json</h4>
        <p style="color: #aaa; font-size: 0.9rem;">Add this line to the array in <code style="color: #29ffb4;">events/events-list.json</code></p>
        <div class="code-block">
          <pre id="listEntry"></pre>
        </div>
        <button class="copy-btn" onclick="copyListEntry()">üìã Copy Entry</button>

        <div class="instructions">
          <h4>üìù How to Deploy This Event:</h4>
          <ol>
            <li>Copy the JSON above and save it as <code id="filenameInstructions"></code> in the <code>events/</code> folder</li>
            <li>Open <code>events/events-list.json</code></li>
            <li>Add the entry above to the "events" array (copy the line including the comma)</li>
            <li>Save and commit your changes</li>
            <li>Push to GitHub - event will appear on the website!</li>
          </ol>
        </div>

        <div id="successMessage" class="success-message">
          ‚úÖ Event files generated successfully! Follow the instructions above to deploy.
        </div>
      </div>
    </div>
    </div>

    <script>
      // Password protection
      const correctPassword = 'bootcamp';
      const passwordForm = document.getElementById('passwordForm');
      const passwordInput = document.getElementById('passwordInput');
      const passwordError = document.getElementById('passwordError');
      const passwordScreen = document.getElementById('passwordScreen');
      const adminContent = document.getElementById('adminContent');

      // Check if already authenticated in this session
      if (sessionStorage.getItem('adminAuthenticated') === 'true') {
        passwordScreen.style.display = 'none';
        adminContent.style.display = 'block';
      }

      passwordForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const enteredPassword = passwordInput.value;

        if (enteredPassword === correctPassword) {
          sessionStorage.setItem('adminAuthenticated', 'true');
          passwordScreen.style.display = 'none';
          adminContent.style.display = 'block';
          passwordError.style.display = 'none';
        } else {
          passwordError.style.display = 'block';
          passwordInput.value = '';
          passwordInput.focus();
          
          // Shake animation
          passwordForm.style.animation = 'shake 0.5s';
          setTimeout(() => {
            passwordForm.style.animation = '';
          }, 500);
        }
      });

      // Event form logic
      const form = document.getElementById('eventForm');
      const outputSection = document.getElementById('outputSection');
      const jsonOutput = document.getElementById('jsonOutput');
      const listEntry = document.getElementById('listEntry');
      const filename = document.getElementById('filename');
      const filenameInstructions = document.getElementById('filenameInstructions');
      const successMessage = document.getElementById('successMessage');

      let generatedJSON = '';
      let generatedEntry = '';

      form.addEventListener('submit', (e) => {
        e.preventDefault();

        const name = document.getElementById('eventName').value.trim();
        const date = document.getElementById('eventDate').value;
        const time = document.getElementById('eventTime').value;
        const link = document.getElementById('eventLink').value.trim();
        const image = document.getElementById('eventImage').value.trim();
        const description = document.getElementById('eventDescription').value.trim();
        const location = document.getElementById('eventLocation').value.trim();
        const calendarDesc = document.getElementById('calendarDescription').value.trim();
        const duration = document.getElementById('durationHours').value;
        const showMoreInfo = document.getElementById('showMoreInfo').checked;
        const showBookNow = document.getElementById('showBookNow').checked;
        const showRemindMe = document.getElementById('showRemindMe').checked;

        // Generate filename from name and date
        const slug = name
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/^-+|-+$/g, '');
        const dateFormatted = date.replace(/-/g, '');
        const fileName = `events/${slug}-${dateFormatted}.json`;

        // Build date string with optional time
        let dateString = date;
        if (time) {
          dateString = `${date}T${time}:00`;
        }

        // Create event object with only provided fields
        const eventObj = {
          name: name,
          date: dateString
        };

        // Add optional fields only if provided
        if (link) eventObj.link = link;
        if (image) eventObj.image = image;
        if (description) eventObj.description = description;
        
        // Add calendar details if any calendar fields are provided
        if (location || calendarDesc || duration) {
          eventObj.calendarDetails = {};
          if (location) eventObj.calendarDetails.location = location;
          if (calendarDesc) eventObj.calendarDetails.description = calendarDesc;
          if (duration) eventObj.calendarDetails.durationHours = parseInt(duration);
        }

        // Add button visibility flags (only if not default true)
        if (!showMoreInfo) eventObj.showMoreInfo = false;
        if (!showBookNow) eventObj.showBookNow = false;
        if (!showRemindMe) eventObj.showRemindMe = false;

        // Generate JSON
        generatedJSON = JSON.stringify(eventObj, null, 2);
        generatedEntry = `"${fileName}",`;

        // Display output
        filename.textContent = fileName;
        filenameInstructions.textContent = fileName;
        jsonOutput.textContent = generatedJSON;
        listEntry.textContent = generatedEntry;
        
        outputSection.style.display = 'block';
        successMessage.style.display = 'block';

        // Scroll to output
        outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      });

      form.addEventListener('reset', () => {
        outputSection.style.display = 'none';
        successMessage.style.display = 'none';
      });

      function copyJSON() {
        navigator.clipboard.writeText(generatedJSON).then(() => {
          const btn = event.target;
          const originalText = btn.textContent;
          btn.textContent = '‚úì Copied!';
          setTimeout(() => {
            btn.textContent = originalText;
          }, 2000);
        });
      }

      function copyListEntry() {
        navigator.clipboard.writeText(generatedEntry).then(() => {
          const btn = event.target;
          const originalText = btn.textContent;
          btn.textContent = '‚úì Copied!';
          setTimeout(() => {
            btn.textContent = originalText;
          }, 2000);
        });
      }
    </script>
  </body>
</html>
